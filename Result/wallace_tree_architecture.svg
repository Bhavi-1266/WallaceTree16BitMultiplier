<svg width="900" height="1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 20px; font-weight: bold; fill: #000; }
      .subtitle { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #000; }
      .label { font-family: Arial, sans-serif; font-size: 11px; fill: #000; }
      .small-label { font-family: Arial, sans-serif; font-size: 9px; fill: #333; }
      .box { fill: #f5f5f5; stroke: #666; stroke-width: 1.5; }
      .input-box { fill: #e8e8e8; stroke: #333; stroke-width: 1.5; }
      .compressor-box { fill: #d0d0d0; stroke: #333; stroke-width: 1.5; }
      .register-box { fill: #c0c0c0; stroke: #333; stroke-width: 1.5; }
      .cla-box { fill: #b0b0b0; stroke: #333; stroke-width: 1.5; }
      .arrow { stroke: #000; stroke-width: 1.5; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#000" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="450" y="25" text-anchor="middle" class="title">16×16 Bit Wallace Tree Multiplier</text>
  
  <!-- Inputs -->
  <rect x="50" y="45" width="150" height="40" rx="3" class="input-box"/>
  <text x="125" y="65" text-anchor="middle" class="subtitle">Multiplicand</text>
  <text x="125" y="78" text-anchor="middle" class="small-label">[15:0]</text>
  
  <rect x="700" y="45" width="150" height="40" rx="3" class="input-box"/>
  <text x="775" y="65" text-anchor="middle" class="subtitle">Multiplier</text>
  <text x="775" y="78" text-anchor="middle" class="small-label">[15:0]</text>
  
  <!-- Arrows from inputs -->
  <line x1="125" y1="85" x2="125" y2="110" class="arrow"/>
  <line x1="775" y1="85" x2="775" y2="110" class="arrow"/>
  
  <!-- Stage 1: Partial Product Generation -->
  <rect x="30" y="110" width="840" height="80" rx="3" class="box"/>
  <text x="450" y="130" text-anchor="middle" class="subtitle">Stage 1: Partial Product Generation</text>
  <text x="450" y="145" text-anchor="middle" class="small-label">16 partial products (PP₀ to PP₁₅), each 32 bits</text>
  
  <!-- Partial Products (simplified) -->
  <rect x="100" y="160" width="50" height="20" rx="2" class="box"/>
  <text x="125" y="173" text-anchor="middle" class="small-label">PP₀</text>
  <rect x="160" y="160" width="50" height="20" rx="2" class="box"/>
  <text x="185" y="173" text-anchor="middle" class="small-label">PP₁</text>
  <rect x="220" y="160" width="50" height="20" rx="2" class="box"/>
  <text x="245" y="173" text-anchor="middle" class="small-label">PP₂</text>
  <text x="280" y="173" text-anchor="middle" class="small-label">...</text>
  <rect x="300" y="160" width="50" height="20" rx="2" class="box"/>
  <text x="325" y="173" text-anchor="middle" class="small-label">PP₁₃</text>
  <rect x="360" y="160" width="50" height="20" rx="2" class="box"/>
  <text x="385" y="173" text-anchor="middle" class="small-label">PP₁₄</text>
  <rect x="420" y="160" width="50" height="20" rx="2" class="box"/>
  <text x="445" y="173" text-anchor="middle" class="small-label">PP₁₅</text>
  
  <!-- Pipeline Register 1 -->
  <rect x="425" y="200" width="50" height="25" rx="2" class="register-box"/>
  <text x="450" y="217" text-anchor="middle" class="small-label">REG</text>
  
  <!-- Arrows to register -->
  <line x1="125" y1="180" x2="125" y2="200" class="arrow"/>
  <line x1="450" y1="180" x2="450" y2="200" class="arrow"/>
  
  <!-- Stage 2: Level 1 -->
  <rect x="30" y="240" width="840" height="100" rx="3" class="box"/>
  <text x="450" y="260" text-anchor="middle" class="subtitle">Stage 2: Wallace Tree Reduction - Level 1</text>
  <text x="450" y="275" text-anchor="middle" class="small-label">4 compressors: 16 → 8 values (4 sums + 4 carries)</text>
  
  <!-- Compressors Level 1 -->
  <rect x="80" y="290" width="100" height="35" rx="2" class="compressor-box"/>
  <text x="130" y="305" text-anchor="middle" class="label">4:2</text>
  <text x="130" y="318" text-anchor="middle" class="small-label">PP₀-PP₃</text>
  
  <rect x="200" y="290" width="100" height="35" rx="2" class="compressor-box"/>
  <text x="250" y="305" text-anchor="middle" class="label">4:2</text>
  <text x="250" y="318" text-anchor="middle" class="small-label">PP₄-PP₇</text>
  
  <rect x="320" y="290" width="100" height="35" rx="2" class="compressor-box"/>
  <text x="370" y="305" text-anchor="middle" class="label">4:2</text>
  <text x="370" y="318" text-anchor="middle" class="small-label">PP₈-PP₁₁</text>
  
  <rect x="440" y="290" width="100" height="35" rx="2" class="compressor-box"/>
  <text x="490" y="305" text-anchor="middle" class="label">4:2</text>
  <text x="490" y="318" text-anchor="middle" class="small-label">PP₁₂-PP₁₅</text>
  
  <!-- Arrows from register to compressors -->
  <line x1="80" y1="225" x2="80" y2="290" class="arrow"/>
  <line x1="200" y1="225" x2="200" y2="290" class="arrow"/>
  <line x1="320" y1="225" x2="320" y2="290" class="arrow"/>
  <line x1="440" y1="225" x2="440" y2="290" class="arrow"/>
  
  <!-- Outputs from Level 1 -->
  <text x="130" y="340" text-anchor="middle" class="small-label">S₁₀, C₁₀</text>
  <text x="250" y="340" text-anchor="middle" class="small-label">S₁₁, C₁₁</text>
  <text x="370" y="340" text-anchor="middle" class="small-label">S₁₂, C₁₂</text>
  <text x="490" y="340" text-anchor="middle" class="small-label">S₁₃, C₁₃</text>
  
  <!-- Pipeline Register 2 -->
  <rect x="425" y="355" width="50" height="25" rx="2" class="register-box"/>
  <text x="450" y="372" text-anchor="middle" class="small-label">REG</text>
  
  <!-- Arrows from compressors to register -->
  <line x1="130" y1="325" x2="130" y2="355" class="arrow"/>
  <line x1="250" y1="325" x2="250" y2="355" class="arrow"/>
  <line x1="370" y1="325" x2="370" y2="355" class="arrow"/>
  <line x1="490" y1="325" x2="490" y2="355" class="arrow"/>
  
  <!-- Stage 2: Level 2 -->
  <rect x="30" y="395" width="840" height="80" rx="3" class="box"/>
  <text x="450" y="415" text-anchor="middle" class="subtitle">Stage 2: Wallace Tree Reduction - Level 2</text>
  <text x="450" y="430" text-anchor="middle" class="small-label">2 compressors: 8 → 4 values (2 sums + 2 carries)</text>
  
  <!-- Compressors Level 2 -->
  <rect x="200" y="445" width="120" height="25" rx="2" class="compressor-box"/>
  <text x="260" y="461" text-anchor="middle" class="label">4:2 Compressor</text>
  <text x="260" y="472" text-anchor="middle" class="small-label">S₁₀,C₁₀,S₁₁,C₁₁ → S₂₀,C₂₀</text>
  
  <rect x="350" y="445" width="120" height="25" rx="2" class="compressor-box"/>
  <text x="410" y="461" text-anchor="middle" class="label">4:2 Compressor</text>
  <text x="410" y="472" text-anchor="middle" class="small-label">S₁₂,C₁₂,S₁₃,C₁₃ → S₂₁,C₂₁</text>
  
  <!-- Arrows from register to compressors -->
  <line x1="200" y1="380" x2="200" y2="445" class="arrow"/>
  <line x1="350" y1="380" x2="350" y2="445" class="arrow"/>
  
  <!-- Pipeline Register 3 -->
  <rect x="425" y="485" width="50" height="25" rx="2" class="register-box"/>
  <text x="450" y="502" text-anchor="middle" class="small-label">REG</text>
  
  <!-- Arrows from compressors to register -->
  <line x1="260" y1="470" x2="260" y2="485" class="arrow"/>
  <line x1="410" y1="470" x2="410" y2="485" class="arrow"/>
  
  <!-- Stage 2: Level 3 -->
  <rect x="30" y="525" width="840" height="70" rx="3" class="box"/>
  <text x="450" y="545" text-anchor="middle" class="subtitle">Stage 2: Wallace Tree Reduction - Level 3</text>
  <text x="450" y="560" text-anchor="middle" class="small-label">1 compressor: 4 → 2 values (1 sum + 1 carry)</text>
  
  <!-- Compressor Level 3 -->
  <rect x="350" y="575" width="200" height="15" rx="2" class="compressor-box"/>
  <text x="450" y="586" text-anchor="middle" class="label">4:2 Compressor: S₂₀, C₂₀, S₂₁, C₂₁ → S₃, C₃</text>
  
  <!-- Arrows from register to compressor -->
  <line x1="450" y1="510" x2="450" y2="575" class="arrow"/>
  
  <!-- Pipeline Register 4 -->
  <rect x="425" y="600" width="50" height="25" rx="2" class="register-box"/>
  <text x="450" y="617" text-anchor="middle" class="small-label">REG</text>
  
  <!-- Arrows from compressor to register -->
  <line x1="450" y1="590" x2="450" y2="600" class="arrow"/>
  
  <!-- Stage 3: Final Addition -->
  <rect x="30" y="640" width="840" height="70" rx="3" class="box"/>
  <text x="450" y="660" text-anchor="middle" class="subtitle">Stage 3: Final Addition</text>
  <text x="450" y="675" text-anchor="middle" class="small-label">32-bit Carry Look-Ahead Adder (8 × 4-bit CLA blocks)</text>
  
  <!-- CLA Block -->
  <rect x="350" y="690" width="200" height="15" rx="2" class="cla-box"/>
  <text x="450" y="701" text-anchor="middle" class="label">32-bit CLA: S₃ + C₃ → Result</text>
  
  <!-- Arrows from register to CLA -->
  <line x1="450" y1="625" x2="450" y2="690" class="arrow"/>
  
  <!-- Pipeline Register 5 -->
  <rect x="425" y="720" width="50" height="25" rx="2" class="register-box"/>
  <text x="450" y="737" text-anchor="middle" class="small-label">REG</text>
  
  <!-- Arrows from CLA to register -->
  <line x1="450" y1="705" x2="450" y2="720" class="arrow"/>
  
  <!-- Output -->
  <rect x="400" y="760" width="100" height="40" rx="3" class="input-box"/>
  <text x="450" y="780" text-anchor="middle" class="subtitle">Result</text>
  <text x="450" y="793" text-anchor="middle" class="small-label">[31:0]</text>
  
  <!-- Arrow from register to output -->
  <line x1="450" y1="745" x2="450" y2="760" class="arrow"/>
  
  <!-- Legend -->
  <rect x="30" y="820" width="840" height="50" rx="3" fill="#f9f9f9" stroke="#666" stroke-width="1"/>
  <text x="40" y="840" text-anchor="start" class="label" font-weight="bold">Legend:</text>
  <rect x="40" y="850" width="25" height="15" class="input-box"/>
  <text x="75" y="861" text-anchor="start" class="small-label">Input/Output</text>
  <rect x="180" y="850" width="25" height="15" class="compressor-box"/>
  <text x="215" y="861" text-anchor="start" class="small-label">4:2 Compressor</text>
  <rect x="350" y="850" width="25" height="15" class="register-box"/>
  <text x="385" y="861" text-anchor="start" class="small-label">Pipeline Register</text>
  <rect x="520" y="850" width="25" height="15" class="cla-box"/>
  <text x="555" y="861" text-anchor="start" class="small-label">CLA Adder</text>
  
  <!-- Notes -->
  <text x="450" y="900" text-anchor="middle" class="small-label" font-style="italic">
    Architecture: 16 partial products → 4 compressors (Level 1) → 2 compressors (Level 2) → 1 compressor (Level 3) → CLA → 32-bit result
  </text>
  <text x="450" y="915" text-anchor="middle" class="small-label" font-style="italic">
    Pipeline registers enable high throughput: 1 multiplication per clock cycle after initial latency
  </text>
</svg>
